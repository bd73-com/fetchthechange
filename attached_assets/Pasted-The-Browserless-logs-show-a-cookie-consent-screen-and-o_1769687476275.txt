The Browserless logs show a cookie consent screen, and our consent click fails (consent clicked: false). Also, even when we say we clear the title-like value, the monitor currentValue still remains the old title in storage, so the UI keeps showing it.

Please update services/scraper.ts with these generic improvements:

1) Stronger consent/banner dismissal (generic, no domain checks)

In the Browserless path, enhance tryDismissConsent(page):

A. Try common OneTrust selectors first

Attempt to click these (with { timeout: 2000, force: true }):

#onetrust-accept-btn-handler

.onetrust-accept-btn-handler

button#onetrust-accept-btn-handler

button[aria-label*="accept" i]

button:has-text("Accept All")

button:has-text("Accept all")

button:has-text("I Agree")

button:has-text("Agree")

button:has-text("OK")

B. If not found on main page, scan iframes

Iterate for (const frame of page.frames()) and attempt the same selectors/text inside each frame using frame.locator(...).

C. As a last resort, use getByRole + force

await page.getByRole("button", { name: /accept|agree|allow|ok|consent/i }).first().click({ timeout: 2000, force: true })

D. After any click

await page.waitForTimeout(1200)

await page.waitForLoadState("networkidle", { timeout: 8000 }).catch(() => {})

E. Add logs

Log whether the banner was found on main page vs iframe

Log the selector/text strategy that succeeded

2) Selector wait strategy after consent

After consent attempt, do:

await page.waitForSelector(selector, { timeout: 10000 }).catch(() => {})

Log selector count after waiting

3) Fix price regex debug output

Our debug price regex currently finds $9 repeatedly. Replace it with a stricter pattern that matches full prices:

/\\$\\s?\\d{1,3}(?:,\\d{3})*(?:\\.\\d{2})/g
and log the first 3 full matches.

4) Actually persist “clearing garbage” to storage

Right now we log “Old value was title-like, clearing” but the DB still keeps the old title.
Fix the update logic so that when we decide to clear, we truly store currentValue: null (or undefined if schema requires) instead of keeping the old value.
Only clear when:

extraction failed AND

the old value is title-like (very long or equals page title/og:title).

After changes, run monitor check again. Expected logs:

consent clicked: true (maybe via iframe or OneTrust selector)

selectorCount after consent > 0

extracted value prints
And the /api/monitors/3 response should show currentValue: null if still blocked, not the old title.